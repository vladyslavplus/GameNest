{
  "Keycloak": {
    "Url": "http://localhost:8080",
    "Realm": "GameNest",
    "Audience": "gamenest_api"
  },
  "Gateway": {
    "MaxRequestSize": 5242880,
    "DefaultRateLimit": {
      "RequestsPerMinute": 100,
      "Burst": 20
    }
  },
  "ReverseProxy": {
    "Routes": {
      "aggregator-route": {
        "ClusterId": "aggregator-cluster",
        "Match": { "Path": "/api/aggregator/{**catch-all}" },
        "Metadata": {
          "ServiceName": "aggregatorservice-api",
          "RateLimit:RequestsPerMinute": "80",
          "RateLimit:Burst": "20",
          "SessionAffinity": "false"
        }
      },
      "orders-route": {
        "ClusterId": "orders-cluster",
        "Match": { "Path": "/api/orders/{**catch-all}" },
        "Metadata": {
          "ServiceName": "orderservice-api",
          "RateLimit:RequestsPerMinute": "60",
          "RateLimit:Burst": "10",
          "SessionAffinity": "true"
        }
      },
      "catalog-route": {
        "ClusterId": "catalog-cluster",
        "Match": { "Path": "/api/catalog/{**catch-all}" },
        "Metadata": {
          "ServiceName": "catalogservice-api",
          "RateLimit:RequestsPerMinute": "120",
          "RateLimit:Burst": "20",
          "SessionAffinity": "false"
        }
      },
      "reviews-route": {
        "ClusterId": "reviews-cluster",
        "Match": { "Path": "/api/reviews/{**catch-all}" },
        "Metadata": {
          "ServiceName": "reviewsservice-api",
          "RateLimit:RequestsPerMinute": "2",
          "RateLimit:Burst": "2",
          "SessionAffinity": "false"
        }
      },
      "identity-auth-route": {
        "ClusterId": "identity-cluster",
        "Match": { "Path": "/api/auth/{**catch-all}" },
        "Metadata": {
          "ServiceName": "identityservice-api",
          "RateLimit:RequestsPerMinute": "100",
          "RateLimit:Burst": "20",
          "SessionAffinity": "false"
        }
      },
      "identity-users-route": {
        "ClusterId": "identity-cluster",
        "Match": { "Path": "/api/users/{**catch-all}" },
        "Metadata": {
          "ServiceName": "identityservice-api",
          "RateLimit:RequestsPerMinute": "60",
          "RateLimit:Burst": "10",
          "SessionAffinity": "false"
        }
      }
    },
    "Clusters": {
      "aggregator-cluster": {
        "LoadBalancingPolicy": "RoundRobin",
        "HttpRequest": { "ActivityTimeout": "00:01:00" },
        "Destinations": {
          "aggregator-destination": {
            "Address": "http://aggregatorservice-api"
          }
        }
      },
      "orders-cluster": {
        "LoadBalancingPolicy": "RoundRobin",
        "HttpRequest": { "ActivityTimeout": "00:00:30" },
        "Destinations": {
          "orders-destination": {
            "Address": "http://orderservice-api"
          }
        }
      },
      "catalog-cluster": {
        "LoadBalancingPolicy": "RoundRobin",
        "HttpRequest": { "ActivityTimeout": "00:00:25" },
        "Destinations": {
          "catalog-destination": {
            "Address": "http://catalogservice-api"
          }
        }
      },
      "reviews-cluster": {
        "LoadBalancingPolicy": "LeastRequests",
        "HttpRequest": { "ActivityTimeout": "00:00:20" },
        "Destinations": {
          "reviews-destination": {
            "Address": "http://reviewsservice-api"
          }
        }
      },
      "identity-cluster": {
        "LoadBalancingPolicy": "RoundRobin",
        "HttpRequest": { "ActivityTimeout": "00:00:30" },
        "Metadata": { "ServiceName": "identityservice-api" },
        "Destinations": {
          "identity-destination": {
            "Address": "http://identityservice-api"
          }
        }
      }
    }
  }
}